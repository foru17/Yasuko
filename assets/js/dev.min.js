function loadJS(A,e,o){var t=!!window.ActiveXObject,i=t&&!window.XMLHttpRequest,a=document.createElement("script"),n=i?document.documentElement:document.getElementsByTagName("head")[0];a.type="text/javascript",a.async=!0,a.readyState?a.onreadystatechange=function(){("loaded"==a.readyState||"complete"==a.readyState)&&(a.onreadystatechange=null,e&&e())}:a.onload=function(){e&&e()},a.src=A,o?document.getElementById(o).appendChild(a):n.insertBefore(a,n.firstChild)}$.fn.extend({isOnScreenVisible:function(){if(!$("body").hasClass("post-template"))return!1;var A=$(window),e={top:A.scrollTop(),left:A.scrollLeft()};e.right=e.left+A.width(),e.bottom=e.top+A.height();var o=this.offset();return o.right=o.left+this.outerWidth(),o.bottom=o.top+this.outerHeight(),!(e.right<o.left||e.left>o.right||e.bottom<o.top||e.top>o.bottom)}});var General={isMobile:!1,isWechat:!1,viewWidth:$(window).width(),absUrl:location.protocol+"//"+location.host,init:function(){var A=window;A.document,navigator.userAgent.toLowerCase(),A.navigator.appVersion.match(/android/gi),A.navigator.appVersion.match(/iphone/gi);$("body").hasClass("post-template")&&General.updateImageWidth(),General.webFontLoader(),General.scrollToPos(),General.arrowEvent(),General.commentLoader()},updateImageWidth:function(){function A(){var A=$(this),e=o.outerWidth(),t=this.naturalWidth;t>=e?A.addClass("full-img"):A.removeClass("full-img")}function e(){t.each(A)}var o=$(".post-content"),t=$(".single-post-inner img").on("load",A);e()},webFontLoader:function(){WebFontConfig={loading:function(){console.log("loading font")},custom:{families:["Exo","iconfont"],urls:[General.absUrl+"/assets/css/font.min.css"]}},loadJS(General.absUrl+"/assets/js/webfont.js",function(){console.log("加载字体JS"),WebFont.load({custom:{families:["Exo","iconfont"]}})})},arrowEvent:function(){$(".arrow_down").click(function(){return $("html,body").animate({scrollTop:$(window).height()-20},600,function(){window.location.hash="#"}),!1})},scrollToPos:function(A){var e="我要飞到最高",o=(A||$(window).height(),$('<a href="#" id="to-top" title="'+e+'"> <div class="to-top-wrap"></div></a>').appendTo("body"));$(window).scroll(function(){$(window).scrollTop()>$(window).height()?o.fadeIn(500):o.fadeOut(500)}),o.click(function(A){A.preventDefault(),$("html,body").animate({scrollTop:0},666,function(){window.location.hash="#"}),console.log("我跳")})},urlIconlize:function(A){var e,o,t="iconfont",i={twitter:t+"-twitter",qzone:t+"-qzone",weibo:t+"-weibo",facebook:t+"-facebook",github:t+"-github",douban:t+"-douban",google:t+"-google",luolei:t+"-luolei",dribble:t+"-dribble",v2ex:t+"-v2ex",zhihu:t+"-zhihu",wikipedia:t+"-wikipedia"};for(var a in i)if("function"!=typeof i[a]){var n=a;A.indexOf(n)>=0&&(e=n,o=i[n])}return o},addIcons:function(){$(".single-post-inner  a:not(:has(img))").each(function(A){var e=$(this).attr("href"),o=document.createElement("a");o.href=e,_selfDomain=o.hostname,General.urlIconlize(_selfDomain),console.log(_selfDomain),$(this).prepend('<i class="iconfont '+General.urlIconlize(_selfDomain)+'"></i>');var t=$(this).find("i").css("color"),i=$(this).css("color");$(this).hover(function(){$(this).css("color",t),$(this).addClass("animated pulse")},function(){$(this).css("color",i),$(this).removeClass("animated pulse")})})},commentLoader:function(){var A=location.protocol+"//"+location.host+location.pathname;$(window).scroll(function(){return $(".comment-area").has("div").length>0?(console.log("已经有了"),!1):(console.log("增加评论"),void($(".author-image").isOnScreenVisible()&&0==$(".author-image").hasClass("duoshuo-loaded")&&($(".author-image").addClass("duoshuo-loaded"),loadJS("https://static.duoshuo.com/embed.js",function(){var e=document.createElement("div");e.setAttribute("data-thread-key",A),e.setAttribute("data-url",location.href),e.setAttribute("data-title",$("title").html()),DUOSHUO.EmbedThread(e),scrollStop=!0,console.log("停止标记"),setTimeout(function(){$(".comment-area").append(e)},250)}))))})}},ImageSmartLoader={isWebPSupported:!1,isImageCompressed:!1,init:function(){ImageSmartLoader.webPCheck()},isCompressedCheck:function(){},webPCheck:function(A,e){var o={demo:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAsAAAABBxAREYiI/gcAAABWUDggGAAAADABAJ0BKgEAAQABABwlpAADcAD+/gbQAA=="};console.log("支持Webp哦");var t=new Image;t.onload=function(){t.width>0&&t.height>0;console.log("支持Webp"),ImageSmartLoader.isWebPSupported=!0,ImageSmartLoader.webPLoader()},t.onerror=function(){console.log("不支持Webp"),ImageSmartLoader.isWebPSupported=!1,ImageSmartLoader.webPLoader()},t.src="data:image/webp;base64,"+o.demo},imgLoader:function(){console.log("加载默认图片")},webPLoader:function(){console.log("加载webP"),1==ImageSmartLoader.isWebPSupported?General.viewWidth<=1024?$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!0,scale_width:750}):$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!1}):General.viewWidth<=1024?$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!0,scale_width:750}):$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!1})}};$(document).ready(function(){var A=$(window);$.fn.lazyload=function(e){function o(){var A=0;i.each(function(){var e=$(this);if(!a.skip_invisible||e.is(":visible"))if($.abovethetop(this,a)||$.leftofbegin(this,a));else if($.belowthefold(this,a)||$.rightoffold(this,a)){if(++A>a.failure_limit)return!1}else e.trigger("appear"),A=0})}var t,i=this,a={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:window,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/gif;base64,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",advanced_load:!1,webP_load:!1,is_scale:!1,scale_width:750};return e&&(void 0!==e.failurelimit&&(e.failure_limit=e.failurelimit,delete e.failurelimit),void 0!==e.effectspeed&&(e.effect_speed=e.effectspeed,delete e.effectspeed),$.extend(a,e)),t=void 0===a.container||a.container===window?A:$(a.container),0===a.event.indexOf("scroll")&&t.bind(a.event,function(){return o()}),this.each(function(){var A=this,e=$(A);A.loaded=!1,(void 0===e.attr("src")||e.attr("src")===!1)&&e.is("img")&&(e.attr("src",a.placeholder),e.addClass("loading")),e.one("appear",function(){if(!this.loaded){if(a.appear){var o=i.length;a.appear.call(A,o,a)}var t=e.attr("data-"+a.data_attribute);1==a.advanced_load&&(t+="!"),1==a.is_scale&&(t+="/fw/"+a.scale_width),1==a.webP_load&&(t+="/format/webp"),$("<img />").bind("load",function(){e.hide(),e.is("img")?e.attr("src",t):e.css("background-image","url('"+t+"')"),e[a.effect](a.effect_speed),A.loaded=!0;var o=$.grep(i,function(A){return!A.loaded});if(i=$(o),a.load){var n=i.length;a.load.call(A,n,a)}e.removeClass("loading")}).attr("src",t)}}),0!==a.event.indexOf("scroll")&&e.bind(a.event,function(){A.loaded||e.trigger("appear")})}),A.bind("resize",function(){o()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&A.bind("pageshow",function(A){A.originalEvent&&A.originalEvent.persisted&&i.each(function(){$(this).trigger("appear")})}),$(document).ready(function(){o()}),this},$.belowthefold=function(e,o){var t;return t=void 0===o.container||o.container===window?(window.innerHeight?window.innerHeight:A.height())+A.scrollTop():$(o.container).offset().top+$(o.container).height(),t<=$(e).offset().top-o.threshold},$.rightoffold=function(e,o){var t;return t=void 0===o.container||o.container===window?A.width()+A.scrollLeft():$(o.container).offset().left+$(o.container).width(),t<=$(e).offset().left-o.threshold},$.abovethetop=function(e,o){var t;return t=void 0===o.container||o.container===window?A.scrollTop():$(o.container).offset().top,t>=$(e).offset().top+o.threshold+$(e).height()},$.leftofbegin=function(e,o){var t;return t=void 0===o.container||o.container===window?A.scrollLeft():$(o.container).offset().left,t>=$(e).offset().left+o.threshold+$(e).width()},$.inviewport=function(A,e){return!($.rightoffold(A,e)||$.leftofbegin(A,e)||$.belowthefold(A,e)||$.abovethetop(A,e))},$.extend($.expr[":"],{"below-the-fold":function(A){return $.belowthefold(A,{threshold:0})},"above-the-top":function(A){return!$.belowthefold(A,{threshold:0})},"right-of-screen":function(A){return $.rightoffold(A,{threshold:0})},"left-of-screen":function(A){return!$.rightoffold(A,{threshold:0})},"in-viewport":function(A){return $.inviewport(A,{threshold:0})},"above-the-fold":function(A){return!$.belowthefold(A,{threshold:0})},"right-of-fold":function(A){return $.rightoffold(A,{threshold:0})},"left-of-fold":function(A){return!$.rightoffold(A,{threshold:0})}}),General.init(),ImageSmartLoader.init(),$("body").hasClass("post-template")&&(General.addIcons(),General.commentLoader())});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhc2UuanMiXSwibmFtZXMiOlsibG9hZEpTIiwidXJsIiwiY2FsbGJhY2siLCJlbCIsImlzSUUiLCJ3aW5kb3ciLCJBY3RpdmVYT2JqZWN0IiwiaXNJRTYiLCJYTUxIdHRwUmVxdWVzdCIsInNjcmlwdCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImhlYWQiLCJkb2N1bWVudEVsZW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInR5cGUiLCJhc3luYyIsInJlYWR5U3RhdGUiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJvbmxvYWQiLCJzcmMiLCJnZXRFbGVtZW50QnlJZCIsImFwcGVuZENoaWxkIiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsIiQiLCJmbiIsImV4dGVuZCIsImlzT25TY3JlZW5WaXNpYmxlIiwiaGFzQ2xhc3MiLCJ3aW4iLCJ2aWV3cG9ydCIsInRvcCIsInNjcm9sbFRvcCIsImxlZnQiLCJzY3JvbGxMZWZ0IiwicmlnaHQiLCJ3aWR0aCIsImJvdHRvbSIsImhlaWdodCIsImJvdW5kcyIsInRoaXMiLCJvZmZzZXQiLCJvdXRlcldpZHRoIiwib3V0ZXJIZWlnaHQiLCJHZW5lcmFsIiwiaXNNb2JpbGUiLCJpc1dlY2hhdCIsInZpZXdXaWR0aCIsImFic1VybCIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJob3N0IiwiaW5pdCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwiYXBwVmVyc2lvbiIsIm1hdGNoIiwidXBkYXRlSW1hZ2VXaWR0aCIsIndlYkZvbnRMb2FkZXIiLCJzY3JvbGxUb1BvcyIsImFycm93RXZlbnQiLCJjb21tZW50TG9hZGVyIiwiJHRoaXMiLCJjb250ZW50V2lkdGgiLCIkcG9zdENvbnRlbnQiLCJpbWFnZVdpZHRoIiwibmF0dXJhbFdpZHRoIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImNhc3BlckZ1bGxJbWciLCIkaW1nIiwiZWFjaCIsIm9uIiwiV2ViRm9udENvbmZpZyIsImxvYWRpbmciLCJjb25zb2xlIiwibG9nIiwiY3VzdG9tIiwiZmFtaWxpZXMiLCJ1cmxzIiwiV2ViRm9udCIsImxvYWQiLCJjbGljayIsImFuaW1hdGUiLCJoYXNoIiwicG9zaXRpb24iLCJTVFJfVE9fVE9QIiwiYnV0dG9uIiwiYXBwZW5kVG8iLCJzY3JvbGwiLCJmYWRlSW4iLCJmYWRlT3V0IiwiZSIsInByZXZlbnREZWZhdWx0IiwidXJsSWNvbmxpemUiLCJkb21haW4iLCJfb3V0cHV0IiwiaWNvbkZvbnRUYWciLCJpY29uTWFwIiwidHdpdHRlciIsInF6b25lIiwid2VpYm8iLCJmYWNlYm9vayIsImdpdGh1YiIsImRvdWJhbiIsImdvb2dsZSIsImx1b2xlaSIsImRyaWJibGUiLCJ2MmV4IiwiemhpaHUiLCJ3aWtpcGVkaWEiLCJuYW1lIiwiTWFwS2V5IiwiaW5kZXhPZiIsImFkZEljb25zIiwiaSIsIl9zcmMiLCJhdHRyIiwidG1wIiwiaHJlZiIsIl9zZWxmRG9tYWluIiwiaG9zdG5hbWUiLCJwcmVwZW5kIiwiX3NlbGZDb2xvciIsImZpbmQiLCJjc3MiLCJfb3JpZ2luYWxDb2xvciIsImhvdmVyIiwiZGF0YVRocmVhZEtleSIsInBhdGhuYW1lIiwiaGFzIiwibGVuZ3RoIiwic2V0QXR0cmlidXRlIiwiaHRtbCIsIkRVT1NIVU8iLCJFbWJlZFRocmVhZCIsInNjcm9sbFN0b3AiLCJzZXRUaW1lb3V0IiwiYXBwZW5kIiwiSW1hZ2VTbWFydExvYWRlciIsImlzV2ViUFN1cHBvcnRlZCIsImlzSW1hZ2VDb21wcmVzc2VkIiwid2ViUENoZWNrIiwiaXNDb21wcmVzc2VkQ2hlY2siLCJmZWF0dXJlIiwiVGVzdEltYWdlcyIsImRlbW8iLCJpbWciLCJJbWFnZSIsIndlYlBMb2FkZXIiLCJvbmVycm9yIiwiaW1nTG9hZGVyIiwibGF6eWxvYWQiLCJhZHZhbmNlZF9sb2FkIiwiZGF0YV9hdHRyaWJ1dGUiLCJ3ZWJQX2xvYWQiLCJpc19zY2FsZSIsInNjYWxlX3dpZHRoIiwicmVhZHkiLCIkd2luZG93Iiwib3B0aW9ucyIsInVwZGF0ZSIsImNvdW50ZXIiLCJlbGVtZW50cyIsInNldHRpbmdzIiwic2tpcF9pbnZpc2libGUiLCJpcyIsImFib3ZldGhldG9wIiwibGVmdG9mYmVnaW4iLCJiZWxvd3RoZWZvbGQiLCJyaWdodG9mZm9sZCIsImZhaWx1cmVfbGltaXQiLCJ0cmlnZ2VyIiwiJGNvbnRhaW5lciIsInRocmVzaG9sZCIsImV2ZW50IiwiZWZmZWN0IiwiY29udGFpbmVyIiwiYXBwZWFyIiwicGxhY2Vob2xkZXIiLCJ1bmRlZmluZWQiLCJmYWlsdXJlbGltaXQiLCJlZmZlY3RzcGVlZCIsImVmZmVjdF9zcGVlZCIsImJpbmQiLCJzZWxmIiwiJHNlbGYiLCJsb2FkZWQiLCJvbmUiLCJlbGVtZW50c19sZWZ0IiwiY2FsbCIsInVwZGF0ZWRVcmwiLCJoaWRlIiwidGVtcCIsImdyZXAiLCJlbGVtZW50IiwidGVzdCIsIm9yaWdpbmFsRXZlbnQiLCJwZXJzaXN0ZWQiLCJmb2xkIiwiaW5uZXJIZWlnaHQiLCJpbnZpZXdwb3J0IiwiZXhwciIsImJlbG93LXRoZS1mb2xkIiwiYSIsImFib3ZlLXRoZS10b3AiLCJyaWdodC1vZi1zY3JlZW4iLCJsZWZ0LW9mLXNjcmVlbiIsImluLXZpZXdwb3J0IiwiYWJvdmUtdGhlLWZvbGQiLCJyaWdodC1vZi1mb2xkIiwibGVmdC1vZi1mb2xkIl0sIm1hcHBpbmdzIjoiQUF1QkEsUUFBU0EsUUFBT0MsRUFBS0MsRUFBVUMsR0FDM0IsR0FBSUMsS0FBU0MsT0FBT0MsY0FDaEJDLEVBQVFILElBQVNDLE9BQU9HLGVBQ3hCQyxFQUFTQyxTQUFTQyxjQUFjLFVBQ2hDQyxFQUFPTCxFQUFRRyxTQUFTRyxnQkFBa0JILFNBQVNJLHFCQUFxQixRQUFRLEVBQ3BGTCxHQUFPTSxLQUFPLGtCQUNkTixFQUFPTyxPQUFRLEVBQ1hQLEVBQU9RLFdBQ1BSLEVBQU9TLG1CQUFxQixZQUNDLFVBQXJCVCxFQUFPUSxZQUErQyxZQUFyQlIsRUFBT1EsY0FDeENSLEVBQU9TLG1CQUFxQixLQUN4QmhCLEdB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bkIrQixnQkFBaUIsU0FBU0QsR0FDdEIsT0FBUXJMLEVBQUVrSixhQUFhbUMsR0FDbkI5QixVQUFXLEtBR25CZ0Msa0JBQW1CLFNBQVNGLEdBQ3hCLE1BQU9yTCxHQUFFbUosWUFBWWtDLEdBQ2pCOUIsVUFBVyxLQUduQmlDLGlCQUFrQixTQUFTSCxHQUN2QixPQUFRckwsRUFBRW1KLFlBQVlrQyxHQUNsQjlCLFVBQVcsS0FHbkJrQyxjQUFlLFNBQVNKLEdBQ3BCLE1BQU9yTCxHQUFFa0wsV0FBV0csR0FDaEI5QixVQUFXLEtBSW5CbUMsaUJBQWtCLFNBQVNMLEdBQ3ZCLE9BQVFyTCxFQUFFa0osYUFBYW1DLEdBQ25COUIsVUFBVyxLQUduQm9DLGdCQUFpQixTQUFTTixHQUN0QixNQUFPckwsR0FBRW1KLFlBQVlrQyxHQUNqQjlCLFVBQVcsS0FHbkJxQyxlQUFnQixTQUFTUCxHQUNyQixPQUFRckwsRUFBRW1KLFlBQVlrQyxHQUNsQjlCLFVBQVcsT0FLdkJuSSxRQUFRUSxPQUNSd0YsaUJBQWlCeEYsT0FDYjVCLEVBQUUsUUFBUUksU0FBUyxtQkFDbkJnQixRQUFRdUUsV0FDUnZFLFFBQVFrQiIsImZpbGUiOiJkZXYubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJC5mbi5leHRlbmQoe1xuXG4gICAgaXNPblNjcmVlblZpc2libGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoISQoJ2JvZHknKS5oYXNDbGFzcygncG9zdC10ZW1wbGF0ZScpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHdpbiA9ICQod2luZG93KTtcbiAgICAgICAgdmFyIHZpZXdwb3J0ID0ge1xuICAgICAgICAgICAgdG9wOiB3aW4uc2Nyb2xsVG9wKCksXG4gICAgICAgICAgICBsZWZ0OiB3aW4uc2Nyb2xsTGVmdCgpXG4gICAgICAgIH07XG4gICAgICAgIHZpZXdwb3J0LnJpZ2h0ID0gdmlld3BvcnQubGVmdCArIHdpbi53aWR0aCgpO1xuICAgICAgICB2aWV3cG9ydC5ib3R0b20gPSB2aWV3cG9ydC50b3AgKyB3aW4uaGVpZ2h0KCk7XG5cbiAgICAgICAgdmFyIGJvdW5kcyA9IHRoaXMub2Zmc2V0KCk7XG4gICAgICAgIGJvdW5kcy5yaWdodCA9IGJvdW5kcy5sZWZ0ICsgdGhpcy5vdXRlcldpZHRoKCk7XG4gICAgICAgIGJvdW5kcy5ib3R0b20gPSBib3VuZHMudG9wICsgdGhpcy5vdXRlckhlaWdodCgpO1xuXG4gICAgICAgIHJldHVybiAoISh2aWV3cG9ydC5yaWdodCA8IGJvdW5kcy5sZWZ0IHx8IHZpZXdwb3J0LmxlZnQgPiBib3VuZHMucmlnaHQgfHwgdmlld3BvcnQuYm90dG9tIDwgYm91bmRzLnRvcCB8fCB2aWV3cG9ydC50b3AgPiBib3VuZHMuYm90dG9tKSk7XG4gICAgfSxcblxufSk7XG5cbmZ1bmN0aW9uIGxvYWRKUyh1cmwsIGNhbGxiYWNrLCBlbCkge1xuICAgIHZhciBpc0lFID0gISF3aW5kb3cuQWN0aXZlWE9iamVjdCxcbiAgICAgICAgaXNJRTYgPSBpc0lFICYmICF3aW5kb3cuWE1MSHR0cFJlcXVlc3QsXG4gICAgICAgIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIiksXG4gICAgICAgIGhlYWQgPSBpc0lFNiA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCA6IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcbiAgICBzY3JpcHQudHlwZSA9IFwidGV4dC9qYXZhc2NyaXB0XCI7XG4gICAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcbiAgICBpZiAoc2NyaXB0LnJlYWR5U3RhdGUpIHtcbiAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHNjcmlwdC5yZWFkeVN0YXRlID09IFwibG9hZGVkXCIgfHwgc2NyaXB0LnJlYWR5U3RhdGUgPT0gXCJjb21wbGV0ZVwiKSB7XG4gICAgICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc2NyaXB0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzY3JpcHQuc3JjID0gdXJsO1xuICAgIGlmIChlbCkge1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbCkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBoZWFkLmluc2VydEJlZm9yZShzY3JpcHQsIGhlYWQuZmlyc3RDaGlsZCk7XG4gICAgfVxufTtcblxuXG52YXIgR2VuZXJhbCA9IHtcbiAgICBpc01vYmlsZTogZmFsc2UsXG4gICAgaXNXZWNoYXQ6IGZhbHNlLFxuICAgIHZpZXdXaWR0aDogJCh3aW5kb3cpLndpZHRoKCksXG4gICAgYWJzVXJsOiBsb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyBsb2NhdGlvbi5ob3N0LFxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgd2luID0gd2luZG93O1xuICAgICAgICB2YXIgZG9jID0gd2luLmRvY3VtZW50O1xuICAgICAgICB2YXIgVUEgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKClcbiAgICAgICAgdmFyIGlzQW5kcm9pZCA9IHdpbi5uYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvYW5kcm9pZC9naSk7XG4gICAgICAgIHZhciBpc0lQaG9uZSA9IHdpbi5uYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvaXBob25lL2dpKTtcbiAgICAgICAgaWYgKCQoJ2JvZHknKS5oYXNDbGFzcygncG9zdC10ZW1wbGF0ZScpKSB7XG4gICAgICAgICAgICBHZW5lcmFsLnVwZGF0ZUltYWdlV2lkdGgoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIEdlbmVyYWwud2ViRm9udExvYWRlcigpO1xuICAgICAgICBHZW5lcmFsLnNjcm9sbFRvUG9zKCk7XG4gICAgICAgIEdlbmVyYWwuYXJyb3dFdmVudCgpO1xuICAgICAgICBHZW5lcmFsLmNvbW1lbnRMb2FkZXIoKTtcbiAgICB9LFxuICAgIHVwZGF0ZUltYWdlV2lkdGg6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgJHBvc3RDb250ZW50ID0gJChcIi5wb3N0LWNvbnRlbnRcIik7XG4gICAgICAgIC8vICRwb3N0Q29udGVudC5maXRWaWRzKCk7XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlSW1hZ2VXaWR0aCgpIHtcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgY29udGVudFdpZHRoID0gJHBvc3RDb250ZW50Lm91dGVyV2lkdGgoKSwgLy8gV2lkdGggb2YgdGhlIGNvbnRlbnRcbiAgICAgICAgICAgICAgICBpbWFnZVdpZHRoID0gdGhpcy5uYXR1cmFsV2lkdGg7IC8vIE9yaWdpbmFsIGltYWdlIHJlc29sdXRpb25cblxuICAgICAgICAgICAgaWYgKGltYWdlV2lkdGggPj0gY29udGVudFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgJHRoaXMuYWRkQ2xhc3MoJ2Z1bGwtaW1nJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICR0aGlzLnJlbW92ZUNsYXNzKCdmdWxsLWltZycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyICRpbWcgPSAkKFwiLnNpbmdsZS1wb3N0LWlubmVyIGltZ1wiKS5vbignbG9hZCcsIHVwZGF0ZUltYWdlV2lkdGgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNhc3BlckZ1bGxJbWcoKSB7XG4gICAgICAgICAgICAkaW1nLmVhY2godXBkYXRlSW1hZ2VXaWR0aCk7XG4gICAgICAgIH1cblxuICAgICAgICBjYXNwZXJGdWxsSW1nKCk7XG4gICAgfSxcbiAgICB3ZWJGb250TG9hZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgV2ViRm9udENvbmZpZyA9IHtcbiAgICAgICAgICAgIGxvYWRpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2FkaW5nIGZvbnQnKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGN1c3RvbToge1xuICAgICAgICAgICAgICAgIGZhbWlsaWVzOiBbJ0V4bycsICdpY29uZm9udCddLFxuICAgICAgICAgICAgICAgIHVybHM6IFtHZW5lcmFsLmFic1VybCArICcvYXNzZXRzL2Nzcy9mb250Lm1pbi5jc3MnXVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBsb2FkSlMoR2VuZXJhbC5hYnNVcmwgKyAnL2Fzc2V0cy9qcy93ZWJmb250LmpzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn5Yqg6L295a2X5L2TSlMnKTtcbiAgICAgICAgICAgIFdlYkZvbnQubG9hZCh7XG4gICAgICAgICAgICAgICAgY3VzdG9tOiB7XG4gICAgICAgICAgICAgICAgICAgIGZhbWlsaWVzOiBbJ0V4bycsICdpY29uZm9udCddXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pXG5cblxuXG5cbiAgICB9LFxuICAgIGFycm93RXZlbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcuYXJyb3dfZG93bicpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnaHRtbCxib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAkKHdpbmRvdykuaGVpZ2h0KCkgLSAyMFxuICAgICAgICAgICAgfSwgNjAwLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICcjJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KVxuICAgIH0sXG4gICAgLy/lubPmu5Hmu5rliqjliLDpobbpg6hcbiAgICBzY3JvbGxUb1BvczogZnVuY3Rpb24ocG9zaXRpb24pIHtcbiAgICAgICAgdmFyIFNUUl9UT19UT1AgPSAn5oiR6KaB6aOe5Yiw5pyA6auYJyxcbiAgICAgICAgICAgIGNvdmVySGVpZ2h0ID0gcG9zaXRpb24gfHwgJCh3aW5kb3cpLmhlaWdodCgpOyAvL+iOt+W+l+WbvueJh+mrmOW6plxuICAgICAgICB2YXIgYnV0dG9uID0gJCgnPGEgaHJlZj1cIiNcIiBpZD1cInRvLXRvcFwiIHRpdGxlPVwiJyArIFNUUl9UT19UT1AgKyAnXCI+IDxkaXYgY2xhc3M9XCJ0by10b3Atd3JhcFwiPjwvZGl2PjwvYT4nKS5hcHBlbmRUbygnYm9keScpO1xuICAgICAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCQod2luZG93KS5zY3JvbGxUb3AoKSA+ICQod2luZG93KS5oZWlnaHQoKSkge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5mYWRlSW4oNTAwKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmZhZGVPdXQoNTAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgYnV0dG9uLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICQoJ2h0bWwsYm9keScpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogMFxuICAgICAgICAgICAgfSwgNjY2LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9ICcjJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+aIkei3sycpO1xuICAgICAgICB9KVxuICAgIH0sXG4gICAgLyrnu5nmlofnq6DkuK3nmoR1cmzmt7vliqBpY29uZm9udOaWueS+v+ivhuWIqyovXG4gICAgdXJsSWNvbmxpemU6IGZ1bmN0aW9uKHVybCkge1xuICAgICAgICB2YXIgZG9tYWluLFxuICAgICAgICAgICAgX291dHB1dDtcbiAgICAgICAgdmFyIGljb25Gb250VGFnID0gJ2ljb25mb250JztcbiAgICAgICAgdmFyIGljb25NYXAgPSB7IC8q57Si5byVIOWPr+WcqOi/memHjOa3u+WKoOWMuemFjeinhOWImSovXG4gICAgICAgICAgICAndHdpdHRlcic6IGljb25Gb250VGFnICsgJy10d2l0dGVyJyxcbiAgICAgICAgICAgICdxem9uZSc6IGljb25Gb250VGFnICsgJy1xem9uZScsXG4gICAgICAgICAgICAnd2VpYm8nOiBpY29uRm9udFRhZyArICctd2VpYm8nLFxuICAgICAgICAgICAgJ2ZhY2Vib29rJzogaWNvbkZvbnRUYWcgKyAnLWZhY2Vib29rJyxcbiAgICAgICAgICAgICdnaXRodWInOiBpY29uRm9udFRhZyArICctZ2l0aHViJyxcbiAgICAgICAgICAgICdkb3ViYW4nOiBpY29uRm9udFRhZyArICctZG91YmFuJyxcbiAgICAgICAgICAgICdnb29nbGUnOiBpY29uRm9udFRhZyArICctZ29vZ2xlJyxcbiAgICAgICAgICAgICdsdW9sZWknOiBpY29uRm9udFRhZyArICctbHVvbGVpJyxcbiAgICAgICAgICAgICdkcmliYmxlJzogaWNvbkZvbnRUYWcgKyAnLWRyaWJibGUnLFxuICAgICAgICAgICAgJ3YyZXgnOiBpY29uRm9udFRhZyArICctdjJleCcsXG4gICAgICAgICAgICAnemhpaHUnOiBpY29uRm9udFRhZyArICctemhpaHUnLFxuICAgICAgICAgICAgJ3dpa2lwZWRpYSc6IGljb25Gb250VGFnICsgJy13aWtpcGVkaWEnXG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gaWNvbk1hcCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpY29uTWFwW25hbWVdICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdmFyIE1hcEtleSA9IG5hbWU7XG4gICAgICAgICAgICAgICAgaWYgKHVybC5pbmRleE9mKE1hcEtleSkgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICBkb21haW4gPSBNYXBLZXk7XG4gICAgICAgICAgICAgICAgICAgIF9vdXRwdXQgPSBpY29uTWFwW01hcEtleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF9vdXRwdXQ7XG4gICAgfSxcbiAgICBhZGRJY29uczogZnVuY3Rpb24oKSB7XG4gICAgICAgIC8q57uZ5Y2a5a6i5paH56ug5Zyw5Z2AdXJs5re75YqgaWNv6K+G5YirKi9cbiAgICAgICAgJCgnLnNpbmdsZS1wb3N0LWlubmVyICBhOm5vdCg6aGFzKGltZykpJykuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgICAgICB2YXIgX3NyYyA9ICQodGhpcykuYXR0cignaHJlZicpO1xuICAgICAgICAgICAgdmFyIHRtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICAgIHRtcC5ocmVmID0gX3NyYztcbiAgICAgICAgICAgIF9zZWxmRG9tYWluID0gdG1wLmhvc3RuYW1lO1xuICAgICAgICAgICAgR2VuZXJhbC51cmxJY29ubGl6ZShfc2VsZkRvbWFpbik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhfc2VsZkRvbWFpbik7XG4gICAgICAgICAgICAvLyQodGhpcykuYXBwZW5kKHVybEljb25saXplKF9zZWxmRG9tYWluKSk7XG4gICAgICAgICAgICAkKHRoaXMpLnByZXBlbmQoJzxpIGNsYXNzPVwiaWNvbmZvbnQgJyArIEdlbmVyYWwudXJsSWNvbmxpemUoX3NlbGZEb21haW4pICsgJ1wiPjwvaT4nKTtcbiAgICAgICAgICAgIHZhciBfc2VsZkNvbG9yID0gJCh0aGlzKS5maW5kKCdpJykuY3NzKCdjb2xvcicpLFxuICAgICAgICAgICAgICAgIF9vcmlnaW5hbENvbG9yID0gJCh0aGlzKS5jc3MoJ2NvbG9yJyk7XG5cbiAgICAgICAgICAgIC8q6byg5qCH5oKs5rWu5pe2Ki9cbiAgICAgICAgICAgICQodGhpcykuaG92ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2NvbG9yJywgX3NlbGZDb2xvcik7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYW5pbWF0ZWQgcHVsc2UnKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdjb2xvcicsIF9vcmlnaW5hbENvbG9yKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhbmltYXRlZCBwdWxzZScpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBjb21tZW50TG9hZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGRhdGFUaHJlYWRLZXkgPSBsb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyBsb2NhdGlvbi5ob3N0ICsgbG9jYXRpb24ucGF0aG5hbWU7XG4gICAgICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoJCgnLmNvbW1lbnQtYXJlYScpLmhhcygnZGl2JykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCflt7Lnu4/mnInkuoYnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+WinuWKoOivhOiuuicpO1xuICAgICAgICAgICAgICAgIGlmICgkKCcuYXV0aG9yLWltYWdlJykuaXNPblNjcmVlblZpc2libGUoKSAmJiAkKCcuYXV0aG9yLWltYWdlJykuaGFzQ2xhc3MoJ2R1b3NodW8tbG9hZGVkJykgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmF1dGhvci1pbWFnZScpLmFkZENsYXNzKCdkdW9zaHVvLWxvYWRlZCcpO1xuICAgICAgICAgICAgICAgICAgICBsb2FkSlMoJ2h0dHBzOi8vc3RhdGljLmR1b3NodW8uY29tL2VtYmVkLmpzJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGF0YS10aHJlYWQta2V5JywgZGF0YVRocmVhZEtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdXJsJywgbG9jYXRpb24uaHJlZik7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAkKCd0aXRsZScpLmh0bWwoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBEVU9TSFVPLkVtYmVkVGhyZWFkKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFN0b3AgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+WBnOatouagh+iusCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuY29tbWVudC1hcmVhJykuYXBwZW5kKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDI1MClcblxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcbiAgICB9XG59XG5cblxuXG52YXIgSW1hZ2VTbWFydExvYWRlciA9IHtcbiAgICBpc1dlYlBTdXBwb3J0ZWQ6IGZhbHNlLFxuICAgIGlzSW1hZ2VDb21wcmVzc2VkOiBmYWxzZSxcbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgSW1hZ2VTbWFydExvYWRlci53ZWJQQ2hlY2soKTtcbiAgICB9LFxuICAgIGlzQ29tcHJlc3NlZENoZWNrOiBmdW5jdGlvbigpIHtcblxuICAgIH0sXG4gICAgd2ViUENoZWNrOiBmdW5jdGlvbihmZWF0dXJlLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgVGVzdEltYWdlcyA9IHtcbiAgICAgICAgICAgICAgICBkZW1vOiBcIlVrbEdSa29BQUFCWFJVSlFWbEE0V0FvQUFBQVFBQUFBQUFBQUFBQUFRVXhRU0FzQUFBQUJCeEFSRVlpSS9nY0FBQUJXVURnZ0dBQUFBREFCQUowQktnRUFBUUFCQUJ3bHBBQURjQUQrL2diUUFBPT1cIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgLy8gIWxvY2FsU3RvcmFnZS5nZXRJdGVtKG5hbWUpIHx8IChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShuYW1lKSAhPT0gJ2F2YWlsYWJsZScgJiYgbG9jYWxTdG9yYWdlLmdldEl0ZW0obmFtZSkgIT09ICdkaXNhYmxlJylcbiAgICAgICAgY29uc29sZS5sb2coJ+aUr+aMgVdlYnDlk6YnKTtcbiAgICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gKGltZy53aWR0aCA+IDApICYmIChpbWcuaGVpZ2h0ID4gMCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn5pSv5oyBV2VicCcpO1xuICAgICAgICAgICAgLy8gYWxlcnQoJ+aUr+aMgScpXG4gICAgICAgICAgICBJbWFnZVNtYXJ0TG9hZGVyLmlzV2ViUFN1cHBvcnRlZCA9IHRydWU7XG4gICAgICAgICAgICBJbWFnZVNtYXJ0TG9hZGVyLndlYlBMb2FkZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgaW1nLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfkuI3mlK/mjIFXZWJwJyk7XG5cbiAgICAgICAgICAgIEltYWdlU21hcnRMb2FkZXIuaXNXZWJQU3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICAgICAgICBJbWFnZVNtYXJ0TG9hZGVyLndlYlBMb2FkZXIoKTtcbiAgICAgICAgICAgIC8vIGNhbGxiYWNrKGZlYXR1cmUsIGZhbHNlKTtcbiAgICAgICAgfTtcbiAgICAgICAgaW1nLnNyYyA9IFwiZGF0YTppbWFnZS93ZWJwO2Jhc2U2NCxcIiArIFRlc3RJbWFnZXNbJ2RlbW8nXTtcblxuICAgIH0sXG4gICAgaW1nTG9hZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+WKoOi9vem7mOiupOWbvueJhycpO1xuICAgIH0sXG4gICAgd2ViUExvYWRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfliqDovb13ZWJQJyk7XG4gICAgICAgIC8vIGFsZXJ0KEltYWdlU21hcnRMb2FkZXIuaXNXZWJQU3VwcG9ydGVkKTtcbiAgICAgICAgaWYgKEltYWdlU21hcnRMb2FkZXIuaXNXZWJQU3VwcG9ydGVkID09IHRydWUpIHtcbiAgICAgICAgICAgIGlmIChHZW5lcmFsLnZpZXdXaWR0aCA8PSAxMDI0KSB7XG4gICAgICAgICAgICAgICAgJChcIi5sYXp5XCIpLmxhenlsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWRfbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YV9hdHRyaWJ1dGU6ICd1cmwnLFxuICAgICAgICAgICAgICAgICAgICB3ZWJQX2xvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzX3NjYWxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzY2FsZV93aWR0aDogNzUwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGFsZXJ0KCfmma7pgJrmlK/mjIEnKVxuICAgICAgICAgICAgICAgICQoXCIubGF6eVwiKS5sYXp5bG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2VkX2xvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFfYXR0cmlidXRlOiAndXJsJyxcbiAgICAgICAgICAgICAgICAgICAgd2ViUF9sb2FkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc19zY2FsZTogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gYWxlcnQoJ+WKoOi9veaZrumAmicpXG4gICAgICAgICAgICBpZiAoR2VuZXJhbC52aWV3V2lkdGggPD0gMTAyNCkge1xuICAgICAgICAgICAgICAgICQoXCIubGF6eVwiKS5sYXp5bG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2VkX2xvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFfYXR0cmlidXRlOiAndXJsJyxcbiAgICAgICAgICAgICAgICAgICAgd2ViUF9sb2FkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNfc2NhbGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlX3dpZHRoOiA3NTBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gYWxlcnQoJ+aZrumAmuaUr+aMgScpXG4gICAgICAgICAgICAgICAgJChcIi5sYXp5XCIpLmxhenlsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWRfbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YV9hdHRyaWJ1dGU6ICd1cmwnLFxuICAgICAgICAgICAgICAgICAgICB3ZWJQX2xvYWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc19zY2FsZTogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfSxcblxufVxuXG5cblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgdmFyICR3aW5kb3cgPSAkKHdpbmRvdyk7XG5cbiAgICAkLmZuLmxhenlsb2FkID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICB2YXIgZWxlbWVudHMgPSB0aGlzO1xuICAgICAgICB2YXIgJGNvbnRhaW5lcjtcbiAgICAgICAgdmFyIHNldHRpbmdzID0ge1xuICAgICAgICAgICAgdGhyZXNob2xkOiAwLFxuICAgICAgICAgICAgZmFpbHVyZV9saW1pdDogMCxcbiAgICAgICAgICAgIGV2ZW50OiBcInNjcm9sbFwiLFxuICAgICAgICAgICAgZWZmZWN0OiBcInNob3dcIixcbiAgICAgICAgICAgIGNvbnRhaW5lcjogd2luZG93LFxuICAgICAgICAgICAgZGF0YV9hdHRyaWJ1dGU6IFwib3JpZ2luYWxcIixcbiAgICAgICAgICAgIHNraXBfaW52aXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGFwcGVhcjogbnVsbCxcbiAgICAgICAgICAgIGxvYWQ6IG51bGwsXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogXCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhiZ0FLQUlBQUFQLy8vLy8vL3lIL0MwNUZWRk5EUVZCRk1pNHdBd0VBQUFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUFBQ0lJeVBxY3Z0RDZPY3ROcUxzOTY4K3crRzRraVc1b21tNnNxMjdndkg4bFVBQUNINUJBZ0pBQUFBTEFBQUFBQnVBQW9BZzdTeXROemEzUFR5OU1UQ3hMeSt2T1RpNVB6Ni9MUzJ0TXpPek9UbTVQeisvUC8vL3dBQUFBQUFBQUFBQUFBQUFBUStjTWxKcTcwNDY4MjcvMkFvam1TSkdjaEJKR2JydmhzQ3pJY0EzM2g3ekhPUS8wQVBnWGNvQkkvSVNnS3dJeWlTVUtRZ1VIaEdyOWlzZHN0OVJRQUFJZmtFQ0FrQUFBQXNBQUFBQUc0QUNnQ0R0TEswM05yYzlQTDB4TUxFdkw2ODVPTGsvUHI4dExhMHpNN001T2JrL1A3OC8vLy9BQUFBQUFBQUFBQUFBQUFBQkQ1d3lVbXJ2VGpyemJ2L1lDaU9aR2xhQm5JUXllbSs4SVVBOUNIRWVFNGVOQjNvd09DRzBEc1VoTWlrSkFIZ0VSVEthRkFRS0VDbDJLeDJ5OTFHQUFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVQbkRKU2F1OU9Pdk51LzlnS0k1a2FaWUdjaERKNmI3d2hRRDBJY1I0VGg0MEhlakE0SWJRT3hTRXlLUWtBZUFSRk1wb1VCQW9RS1hZckhiTGpVVUFBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFRK2NNbEpxNzA0NjgyNy8yQW9qbVJwbnBpQkhFU0N2bkE4SVVCOUNIS3VoMGRkQjd1Z0VFUHdIUXJEWkRJQjZCRVV5bWhRRUNoQXBkaXNkc3NOUlFBQUlma0VDQWtBQUFBc0FBQUFBRzRBQ2dDRHRMSzAzTnJjOVBMMHhNTEV2TDY4NU9May9Qcjh0TGEwek03TTVPYmsvUDc4Ly8vL0FBQUFBQUFBQUFBQUFBQUFCRDV3eVVtcnZUanJ6YnYvWUNpT1pHbWVuWUVjUklLK2NEd2hRSDBJY3E2SFIxMEh1NkFRUS9BZENzTmtNZ0hvRVJUS2FGQVFLRUNsMkt4MnkrVkVBQUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRVVYREpTYXU5T092TnUvOWdLSTVrdVNURWdSaG1pNkVxNjVZQ1lBUElyQy8xbmUraXdBRXdQQUJkQWFMTmVBUVZiZ0JDMC9SVVNxY2VSWXFZd0pJTTIwUFgyMUVVQWdJeXlZeFd1OS93dUh3YUFRQWgrUVFJQ1FBQUFDd0FBQUFBYmdBS0FJTzBzclRjMnR6MDh2VEV3c1M4dnJ6azR1VDgrdnkwdHJUTXpzems1dVQ4L3Z6Ly8vOEFBQUFBQUFBQUFBQUFBQUFFVTNESlNhdTlPT3ZOdS85Z0tJNWtXU2JFZ1JqbVppQUhrYlQwS0FBNGdOUVlraDhDbnBBVE9BQ01oMkVsaHdzb241WUNrd0NWRUk3SFFuV3JTQjFuMVVTT29OaHlDNEdnV1JCSWxNM3d1SHhPaDBjQUFDSDVCQWdKQUFBQUxBQUFBQUJ1QUFvQWc3U3l0TnphM1BUeTlNVEN4THkrdk9UaTVQejYvTFMydE16T3pPVG01UHorL1AvLy93QUFBQUFBQUFBQUFBQUFBQVJRY01sSnE3MDQ2ODI3LzJBb2ptUnBlZ2x4SU1hWXJ1MHB6NWNBM0FBaTJyaE8vN1RBQVRBOGlBTEVteEhJTkJWd0FJTG9tWlEycnlLRmlwZ1FHYmFITG5iOFVSUUNBcElaVFc2NzMvQzRPd0lBSWZrRUNBa0FBQUFzQUFBQUFHNEFDZ0NEdExLMDNOcmM5UEwweE1MRXZMNjg1T0xrL1ByOHRMYTB6TTdNNU9iay9QNzgvLy8vQUFBQUFBQUFBQUFBQUFBQUJGVnd5VW1ydlRqcnpidi9ZQ2lPWkdtZVMwSWNpSkVaeUVFa2FHMS9BcUFEU0lic0I4RnRTS3dFRGdEa0liUFRCWXJRWWFGSnlCQ1N5VUowaTFLc2tqUk1Za2RRY004bFJTRWcxQWdDQ1RONlRxL2I3NllJQUNINUJBZ0pBQUFBTEFBQUFBQnVBQW9BZzdTeXROemEzUFR5OU1UQ3hMeSt2T1RpNVB6Ni9MUzJ0TXpPek9UbTVQeisvUC8vL3dBQUFBQUFBQUFBQUFBQUFBUlNjTWxKcTcwNDY4MjcvMkFvam1ScG5sWkNISWhScWF5THpyUW9BRGlBVUhlKzE4QmdKbkFBRkErVWdCR0hGRHFmaFJ5QVFJa3VxYzhzVUxFeUppaUc3dUdyTGM4VWhZREFnbGFiMy9DNGZINktBQUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRWFYREpTYXU5T092TnUvOWdLSTZrbHhBSFlwU3NaaUFIa1ZSdlBMZWNBT3dBZ3Y4VUJPOGdDQTZMUUV6Z0FHQWVra0RlTGtCaDhxaFFTMEZLeU9JSXpXYUJBdDRkeGw2S0F0VzhwVWtKSGtGQmlUUG5iM1VoZ015VEJBRUpkQldBQllOK2lJbUtpNHh2RVFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVZM0RKU2F1OU9Pdk51LzlnS0k1azJTWEVnUmdtaDZvczlhNXRqUWxBRGlEMnJlOFVuSTdYS3k0Q0IwRHlZS3dFbERubTVKbFVObnVGSCtFNnlVSzMzU2dBekRVcFVzcEVlV0ZBSDlTVDloSytMaWtLQVVGOWNjOWIrbnA3Z29PRWhZWkZFUUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRWFYREpTYXU5T092TnUvOWdLSTVrYVZvSmNTREdhQ0FIa1ZSdlBKKzRLUUE4Z0l5STNrRkFDZktHdWFRb2NBQTBENk1lTDBCcDlxaktiS2NnSll3SVRtZUJBajZPdGVpTVF1VzhoUkk5Z29JQ2I4clQrSXVpRUNDU0JBRUpjeFdBQllONWlJbUtpNHlMRVFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVaSERKU2F1OU9Pdk51LzlnS0k1a2FZSUpjU0NHbHE0dDliSm5iVjhDb0FOSWx1Kzl5VThYdkJscmdRTkFlY2dFbHJybTVLbGNIcSttd2c1QXlHaWgzY2xYR2NhYVFRclZNcEV4cUEvc2lac1pQOXM3aWtKQXNNbnZMWDU4ZDRPRWhZYUhaeEVBSWZrRUNBa0FBQUFzQUFBQUFHNEFDZ0NEdExLMDNOcmM5UEwweE1MRXZMNjg1T0xrL1ByOHRMYTB6TTdNNU9iay9QNzgvLy8vQUFBQUFBQUFBQUFBQUFBQUJHbHd5VW1ydlRqcnpidi9ZQ2lPWkdtV0NYRWdSbVVnQjVHNHNIemVPQ2NBUElCVWlONUJRQW55aHJta1VoSTRBSnlIU284WG9EaDcxYVgyVkpnU0tvVG5zMEFKSDhuYjlFaWhlczRvaVI1QkFSZlAxZmlRb2hBZ1dnUUJDWFFWZ0FXRGVZaUppb3VNTnhFQUlma0VDQWtBQUFBc0FBQUFBRzRBQ2dDRHRMSzAzTnJjOVBMMHhNTEV2TDY4NU9May9Qcjh0TGEwek03TTVPYmsvUDc4Ly8vL0FBQUFBQUFBQUFBQUFBQUFCSE53eVVtcnZUanJ6YnYvWUNpT3BHYVVxSWtjUkdJbHhJR2NGQ3pUYVlYa1BJVUF3SU9BSWdBQ2Q1T2lFZG1USEpvOUl6QkFDVWlmRTZzUkN5VkFlUVRBUVZ5Z0ZNWmo3NlFnRnF1aHJtOHFZU1FvS0lxWU9DNHg2QUY4Y29JbEFnRUpkeFVLQlFGRGlZdU5nNUdTazVTVmxoUVJBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFTQWNNbEpxNzA0NjgyNy8yQW9qbVJaSmNTQkdDYUhxaXhsSUFlUlZITjl0NlVBL0FBRUwrTURDaWtJNEVHQVZES0hvc0FCTUQxQUx3SHF6MG9CL2dLVUtSQjhCUlc4aEhMbHJFMVRDTnBENGEyY3F6MktGSFYzWHhqMEIzd1NDVUFFQ2hTRVU0WjllQVVCVDR3TENvNlFGQUlCQ1ljVmx3V2FrWitnb2FLam9CRUFJZmtFQ0FrQUFBQXNBQUFBQUc0QUNnQ0R0TEswM05yYzlQTDB4TUxFdkw2ODVPTGsvUHI4dExhMHpNN001T2JrL1A3OC8vLy9BQUFBQUFBQUFBQUFBQUFBQkgxd3lVbXJ2VGpyemJ2L1lDaU9aRWtteElFWW80RWNSR0toS2t2UnE2bDdBdUFEaUJIaWR4QlFlci9nQk9sVDdwNll3QUV3UFl4K3ZnQWxnTFZPdUVTbzJGTEFFa1lFS3JWQUtWUUI1MG01R2gvYkZTbXFUSlQ0RVJRVWVGVjdFZ1o1QUlSMll3b0ZBVVlrQWdFSmdCV01qaGFXajRxYm5KMmVuNkFoRVFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVnSERKU2F1OU9Pdk51LzlnS0k1a2FXSUpjU0NHbHE0dFpTQUhrVlJ6Zlo5OEtRQkFBQ0x6Q3c0cGlPQkJnRlF5ZTFCUTRBQ2dIaktCS3ZCS0NRSURGR29RSEMxekNsNUNCcTFWVXdqYVErR3RuSnZ2R0lXcXVyc1k5Z2Q5RWdsQkJBb1VoRlNHZUl3V0NnVUJUeG1Qa1JjQ0FRbUhGWmNGbW8yZm9LR2lvNThSQUNINUJBZ0pBQUFBTEFBQUFBQnVBQW9BZzdTeXROemEzUFR5OU1UQ3hMeSt2T1RpNVB6Ni9MUzJ0TXpPek9UbTVQeisvUC8vL3dBQUFBQUFBQUFBQUFBQUFBUi9jTWxKcTcwNDY4MjcvMkFvam1ScGRnbHhJRVpsSUFlUldPbmFValY3N3Z3aUFFQUFvb0lJSGdTVVgzQTRVUUtadmFnb2NBQlVENVVnTUVBSmFMRVRyMUZLQmhXMGhBckJhaTFRQ2xkQWVuSyt6c3Q0alVKbG5lR0NCQW9VZTFkK0VnWjhBSVo1akJZS0JRRklGZ0lCQ1lJVmo1R09rSktObnArZ29hSlNFUUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRWdIREpTYXU5T092TnUvOWdLSTVrYVhZR2NoQ0psUkFIWWxUcDJtWnZQSjk4aVFEQWc0QWlBQUlSbFY5d2VDa2FrYjFvNkdBRUJDaUI2cUZTdFdLeXhxMTAzQ0dFQzVRQ2xVcW9tTmZvaXhyQUp0czFDVHFBb0tBWVlIUTNFM2xBZkJnS2dBZUNkNHhFQVFWOUZRb0ZBVXdWQWdFSmtZZVVsbzJmb0tHaW8yTVJBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFSOGNNbEpxNzA0NjgyNy8yQW9qbVJwZWdseElFWmxJQWVSV09uYWlqVjc3cHdBL0FCRUJRRThDQ2crb0RDVS9DMTVVRXZnQUtBZUtzQmZnQkxJWGtQZFluUk1LV1FKRlVLMVdpaGJBZWlRMlJvbmp4V3E2b3lTQUJJVUZIaFdleUFHZVFDRWRsRUtCUUZIRmdJQkNZQVZqSTRrbG8rS201eWRucCtLRVFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVmSERKU2F1OU9Pdk51LzlnS0k1a2FYb0djaENKbFJBSFlsVHAycDdhZStBbkF2d0hBVVh3K3lFcVBxQ1FaeUgrbUtWREVSQ2dCS1k3eXBRS3JWeWZYUkdoZUNoUUNsSXBvVEpPbThNU05DQUwveVRtQUlLQ1lvRE5ieE4zUDNwMUN3cCtoU0FDQVFWN0ZRb0ZBVXNWaXdtT2haQlZpWnVjblo2ZkZoRUFJZmtFQ0FrQUFBQXNBQUFBQUc0QUNnQ0R0TEswM05yYzlQTDB4TUxFdkw2ODVPTGsvUHI4dExhMHpNN001T2JrL1A3OC8vLy9BQUFBQUFBQUFBQUFBQUFBQkd0d3lVbXJ2VGpyemJ2L1lDaU9aR2wrQ1hFZ1JtVWdCNUZZNmRxZWVLNEpRQThnRllUdklLRHdmRUNkY3JrSUhBRFBROFhYQzFBQ1ZDbHpleXBRQ1JVQ0ZGcWdGS0lBTUhjOVVxaWdNMHJDUjFCUTNORTRlLzlSRkFKRkZnSUJDWFlWZm9COGlvdU1qWTVyRVFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVhM0RKU2F1OU9Pdk51LzlnS0k1a2FYNEdjaENKbFJBSFltaHZQSjk0YmlGQWZ3Z1VRYStIeUFpSFJaMHlkeGdDQXBTQTg1Q1JEcW5MYklsd0xWQUt6U1loVXdDRXg5cDBLR0VHRUJRVUE4emN3c2liZ0xwNjN4RUVDbkFWQ2dVQlFCcURoWHlLaTR5Tmpuc1JBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFScGNNbEpxNzA0NjgyNy8yQW9qbVJwZ2dseElFWmxJQWVSa09uYW5uZ3BBRHlBVklqZVFTRGE5WDY1WkNod0FEUVBsUjR2SUFwSW9jcHNweUFsVkFoT1owRlVlQUs4Mm5SR29YTE9LSWtlUVNGaVA5L3FmRVZSQ0JBdEFnRUpkQ044Zm5xSWlZcUxqRm9SQUNINUJBZ0pBQUFBTEFBQUFBQnVBQW9BZzdTeXROemEzUFR5OU1UQ3hMeSt2T1RpNVB6Ni9MUzJ0TXpPek9UbTVQeisvUC8vL3dBQUFBQUFBQUFBQUFBQUFBUnJjTWxKcTcwNDY4MjcvMkFvam1ScGdnWnlFSW1WRUFkaW5Oc2J6M1JlSVVCL0NCUkJyNGZRWFlURG90RjRHQUlDbElEenNLeEloOVJxam9BdFVBck5Ka0U3S1FEQ1kvSXBjUVlRRkJRRDdOeFN5NXVBdXRva0NCVGdGUW9GQVVCN0M0S0Vob3FMakkyT0dCRUFJZmtFQ0FrQUFBQXNBQUFBQUc0QUNnQ0R0TEswM05yYzlQTDB4TUxFdkw2ODVPTGsvUHI4dExhMHpNN001T2JrL1A3OC8vLy9BQUFBQUFBQUFBQUFBQUFBQkZWd3lVbXJ2VGpyemJ2L1lDaU9aR21HQ1hFZ1JtVWdCNUdjZEcwS1FBNGdGYUlmQXB0d3lBa2NBTWREUlpjTEVKL1FTWUZKcUJDUXlFSjBPMVNva0ROS1FrZFFjTTgxUlNFUXRBZ0NDVE42VHEvYjc5c0lBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFSUWNNbEpxNzA0NjgyNy8yQW9qbVJwaGdaeUVJbVdydTBwenlFQzNJZVEyYmhPLzhETDRYWUxaSVpFWTNBWkpCQVBoWXdURjJWYVp3bkFrS0RJRkpEY3EvZ2tDQlM2bW5JQ1BXNjczL0Q0TlFJQUlma0VDQWtBQUFBc0FBQUFBRzRBQ2dDRHRMSzAzTnJjOVBMMHhNTEV2TDY4NU9May9Qcjh0TGEwek03TTVPYmsvUDc4Ly8vL0FBQUFBQUFBQUFBQUFBQUFCRk53eVVtcnZUanJ6YnYvWUNpT1pHbUtDWEVneG1nZ0I1R2NkSTBKUUE0Z0k2SWZBcHZRRmpnQWpJZVJMaGNZT2syRkpXRkVPQjRMejZ4SW9Uck9VRHFDUWt2K0tBcUJJRWtRU0l6TDhMaDhUbjlHQUFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVVSERKU2F1OU9Pdk51LzlnS0k1a2FZb0djaERKdWFWcjY4NGdBdHlIUUY4MnJ1L0F6T0YyQ3dRcFE2THh5SndRaUlkQ2MvSEVTYWZNQkdCSVVFd0x5UzYyS1FnVXZOaHlBajF1dTkvd09DWUNBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFRK2NNbEpxNzA0NjgyNy8yQW9qbVJwamdseElNYnB2ckFsQURTQXhIaE9CZ2ZRSDdxZ2NGT29BUWpEcEZLaVVQa1N5NmhRVVFnSXBOaXNkc3NOUmdBQUlma0VDQWtBQUFBc0FBQUFBRzRBQ2dDRHRMSzAzTnJjOVBMMHhNTEV2TDY4NU9May9Qcjh0TGEwek03TTVPYmsvUDc4Ly8vL0FBQUFBQUFBQUFBQUFBQUFCRDV3eVVtcnZUanJ6YnYvWUNpT1pHbWVTMEljaUlHK2NDd0pRQTBnY3E2SHdRSDRoNTF3aUNuWUFBU2lVcWxZL1JMTHFGQlJDQWlrMkt4Mnk0VkZBQUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRVBuREpTYXU5T092TnUvOWdLSTVrYVo1YlFoeUlnYjV3TEFsQURTQnlyb2ZCQWZpSG5YQ0lLZGdBQktKU3FWajlFc3VvVUZFSUNLVFlySGJMQlVVQUFDSDVCQWdKQUFBQUxBQUFBQUJ1QUFvQWc3U3l0TnphM1BUeTlNVEN4THkrdk9UaTVQejYvTFMydE16T3pPVG01UHorL1AvLy93QUFBQUFBQUFBQUFBQUFBQVErY01sSnE3MDQ2ODI3LzJBb2ptUnBucWlVRUFkaXBIQU1DMEFOSUhLdWg4RUIrSWVkY0lncDJBQUVvbEtwWVAwU3k2aFFVUWdJcE5pc2RzdGRSQUFBSWZrRUNBa0FBQUFzQUFBQUFHNEFDZ0NEdExLMDNOcmM5UEwweE1MRXZMNjg1T0xrL1ByOHRMYTB6TTdNNU9iay9QNzgvLy8vQUFBQUFBQUFBQUFBQUFBQUJEMXd5VW1ydlRqcnpidi9ZQ2lPWkdtZXFKa1FCMktrY0F3TFFBMGdjcTZId1FINGg1MXdpQ25ZQUFTaVVxbGcvUkxMcUZCUkNBaWsyS3gyaTRvQUFEcz1cIixcbiAgICAgICAgICAgIGFkdmFuY2VkX2xvYWQ6IGZhbHNlLFxuICAgICAgICAgICAgd2ViUF9sb2FkOiBmYWxzZSxcbiAgICAgICAgICAgIGlzX3NjYWxlOiBmYWxzZSxcbiAgICAgICAgICAgIHNjYWxlX3dpZHRoOiA3NTBcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgICAgICAgICB2YXIgY291bnRlciA9IDA7XG5cbiAgICAgICAgICAgIGVsZW1lbnRzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2tpcF9pbnZpc2libGUgJiYgISR0aGlzLmlzKFwiOnZpc2libGVcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoJC5hYm92ZXRoZXRvcCh0aGlzLCBzZXR0aW5ncykgfHxcbiAgICAgICAgICAgICAgICAgICAgJC5sZWZ0b2ZiZWdpbih0aGlzLCBzZXR0aW5ncykpIHtcbiAgICAgICAgICAgICAgICAgICAgLyogTm90aGluZy4gKi9cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCEkLmJlbG93dGhlZm9sZCh0aGlzLCBzZXR0aW5ncykgJiZcbiAgICAgICAgICAgICAgICAgICAgISQucmlnaHRvZmZvbGQodGhpcywgc2V0dGluZ3MpKSB7XG4gICAgICAgICAgICAgICAgICAgICR0aGlzLnRyaWdnZXIoXCJhcHBlYXJcIik7XG4gICAgICAgICAgICAgICAgICAgIC8qIGlmIHdlIGZvdW5kIGFuIGltYWdlIHdlJ2xsIGxvYWQsIHJlc2V0IHRoZSBjb3VudGVyICovXG4gICAgICAgICAgICAgICAgICAgIGNvdW50ZXIgPSAwO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgrK2NvdW50ZXIgPiBzZXR0aW5ncy5mYWlsdXJlX2xpbWl0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIC8qIE1haW50YWluIEJDIGZvciBhIGNvdXBsZSBvZiB2ZXJzaW9ucy4gKi9cbiAgICAgICAgICAgIGlmICh1bmRlZmluZWQgIT09IG9wdGlvbnMuZmFpbHVyZWxpbWl0KSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5mYWlsdXJlX2xpbWl0ID0gb3B0aW9ucy5mYWlsdXJlbGltaXQ7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZmFpbHVyZWxpbWl0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gb3B0aW9ucy5lZmZlY3RzcGVlZCkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuZWZmZWN0X3NwZWVkID0gb3B0aW9ucy5lZmZlY3RzcGVlZDtcbiAgICAgICAgICAgICAgICBkZWxldGUgb3B0aW9ucy5lZmZlY3RzcGVlZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJC5leHRlbmQoc2V0dGluZ3MsIG9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogQ2FjaGUgY29udGFpbmVyIGFzIGpRdWVyeSBhcyBvYmplY3QuICovXG4gICAgICAgICRjb250YWluZXIgPSAoc2V0dGluZ3MuY29udGFpbmVyID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIHNldHRpbmdzLmNvbnRhaW5lciA9PT0gd2luZG93KSA/ICR3aW5kb3cgOiAkKHNldHRpbmdzLmNvbnRhaW5lcik7XG5cbiAgICAgICAgLyogRmlyZSBvbmUgc2Nyb2xsIGV2ZW50IHBlciBzY3JvbGwuIE5vdCBvbmUgc2Nyb2xsIGV2ZW50IHBlciBpbWFnZS4gKi9cbiAgICAgICAgaWYgKDAgPT09IHNldHRpbmdzLmV2ZW50LmluZGV4T2YoXCJzY3JvbGxcIikpIHtcbiAgICAgICAgICAgICRjb250YWluZXIuYmluZChzZXR0aW5ncy5ldmVudCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ+a7muWKqOS6hjExMScpO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfmu5rliqgnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIHZhciAkc2VsZiA9ICQoc2VsZik7XG5cbiAgICAgICAgICAgIHNlbGYubG9hZGVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgIC8qIElmIG5vIHNyYyBhdHRyaWJ1dGUgZ2l2ZW4gdXNlIGRhdGE6dXJpLiAqL1xuICAgICAgICAgICAgaWYgKCRzZWxmLmF0dHIoXCJzcmNcIikgPT09IHVuZGVmaW5lZCB8fCAkc2VsZi5hdHRyKFwic3JjXCIpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGlmICgkc2VsZi5pcyhcImltZ1wiKSkge1xuICAgICAgICAgICAgICAgICAgICAkc2VsZi5hdHRyKFwic3JjXCIsIHNldHRpbmdzLnBsYWNlaG9sZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgJHNlbGYuYWRkQ2xhc3MoXCJsb2FkaW5nXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogV2hlbiBhcHBlYXIgaXMgdHJpZ2dlcmVkIGxvYWQgb3JpZ2luYWwgaW1hZ2UuICovXG5cbiAgICAgICAgICAgICRzZWxmLm9uZShcImFwcGVhclwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMubG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5hcHBlYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50c19sZWZ0ID0gZWxlbWVudHMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MuYXBwZWFyLmNhbGwoc2VsZiwgZWxlbWVudHNfbGVmdCwgc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciB1cGRhdGVkVXJsID0gJHNlbGYuYXR0cihcImRhdGEtXCIgKyBzZXR0aW5ncy5kYXRhX2F0dHJpYnV0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5hZHZhbmNlZF9sb2FkID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRVcmwgKz0gJyEnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5pc19zY2FsZSA9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVXJsICs9ICcvZncvJyArIHNldHRpbmdzLnNjYWxlX3dpZHRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy53ZWJQX2xvYWQgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFVybCArPSAnL2Zvcm1hdC93ZWJwJztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHVwZGF0ZWRVcmwpO1xuICAgICAgICAgICAgICAgICAgICAkKFwiPGltZyAvPlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmJpbmQoXCJsb2FkXCIsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGYuaGlkZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzZWxmLmlzKFwiaW1nXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzZWxmLmF0dHIoXCJzcmNcIiwgdXBkYXRlZFVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGYuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLCBcInVybCgnXCIgKyB1cGRhdGVkVXJsICsgXCInKVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGZbc2V0dGluZ3MuZWZmZWN0XShzZXR0aW5ncy5lZmZlY3Rfc3BlZWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogUmVtb3ZlIGltYWdlIGZyb20gYXJyYXkgc28gaXQgaXMgbm90IGxvb3BlZCBuZXh0IHRpbWUuICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSAkLmdyZXAoZWxlbWVudHMsIGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFlbGVtZW50LmxvYWRlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50cyA9ICQodGVtcCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MubG9hZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudHNfbGVmdCA9IGVsZW1lbnRzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MubG9hZC5jYWxsKHNlbGYsIGVsZW1lbnRzX2xlZnQsIHNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGYucmVtb3ZlQ2xhc3MoXCJsb2FkaW5nXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwic3JjXCIsIHVwZGF0ZWRVcmwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvKiBXaGVuIHdhbnRlZCBldmVudCBpcyB0cmlnZ2VyZWQgbG9hZCBvcmlnaW5hbCBpbWFnZSAqL1xuICAgICAgICAgICAgLyogYnkgdHJpZ2dlcmluZyBhcHBlYXIuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGlmICgwICE9PSBzZXR0aW5ncy5ldmVudC5pbmRleE9mKFwic2Nyb2xsXCIpKSB7XG4gICAgICAgICAgICAgICAgJHNlbGYuYmluZChzZXR0aW5ncy5ldmVudCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc2VsZi5sb2FkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzZWxmLnRyaWdnZXIoXCJhcHBlYXJcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyogQ2hlY2sgaWYgc29tZXRoaW5nIGFwcGVhcnMgd2hlbiB3aW5kb3cgaXMgcmVzaXplZC4gKi9cbiAgICAgICAgJHdpbmRvdy5iaW5kKFwicmVzaXplXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdXBkYXRlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qIFdpdGggSU9TNSBmb3JjZSBsb2FkaW5nIGltYWdlcyB3aGVuIG5hdmlnYXRpbmcgd2l0aCBiYWNrIGJ1dHRvbi4gKi9cbiAgICAgICAgLyogTm9uIG9wdGltYWwgd29ya2Fyb3VuZC4gKi9cbiAgICAgICAgaWYgKCgvKD86aXBob25lfGlwb2R8aXBhZCkuKm9zIDUvZ2kpLnRlc3QobmF2aWdhdG9yLmFwcFZlcnNpb24pKSB7XG4gICAgICAgICAgICAkd2luZG93LmJpbmQoXCJwYWdlc2hvd1wiLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIGlmIChldmVudC5vcmlnaW5hbEV2ZW50ICYmIGV2ZW50Lm9yaWdpbmFsRXZlbnQucGVyc2lzdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnRyaWdnZXIoXCJhcHBlYXJcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogRm9yY2UgaW5pdGlhbCBjaGVjayBpZiBpbWFnZXMgc2hvdWxkIGFwcGVhci4gKi9cbiAgICAgICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB1cGRhdGUoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qIENvbnZlbmllbmNlIG1ldGhvZHMgaW4galF1ZXJ5IG5hbWVzcGFjZS4gICAgICAgICAgICovXG4gICAgLyogVXNlIGFzICAkLmJlbG93dGhlZm9sZChlbGVtZW50LCB7dGhyZXNob2xkIDogMTAwLCBjb250YWluZXIgOiB3aW5kb3d9KSAqL1xuXG4gICAgJC5iZWxvd3RoZWZvbGQgPSBmdW5jdGlvbihlbGVtZW50LCBzZXR0aW5ncykge1xuICAgICAgICB2YXIgZm9sZDtcblxuICAgICAgICBpZiAoc2V0dGluZ3MuY29udGFpbmVyID09PSB1bmRlZmluZWQgfHwgc2V0dGluZ3MuY29udGFpbmVyID09PSB3aW5kb3cpIHtcbiAgICAgICAgICAgIGZvbGQgPSAod2luZG93LmlubmVySGVpZ2h0ID8gd2luZG93LmlubmVySGVpZ2h0IDogJHdpbmRvdy5oZWlnaHQoKSkgKyAkd2luZG93LnNjcm9sbFRvcCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9sZCA9ICQoc2V0dGluZ3MuY29udGFpbmVyKS5vZmZzZXQoKS50b3AgKyAkKHNldHRpbmdzLmNvbnRhaW5lcikuaGVpZ2h0KCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZm9sZCA8PSAkKGVsZW1lbnQpLm9mZnNldCgpLnRvcCAtIHNldHRpbmdzLnRocmVzaG9sZDtcbiAgICB9O1xuXG4gICAgJC5yaWdodG9mZm9sZCA9IGZ1bmN0aW9uKGVsZW1lbnQsIHNldHRpbmdzKSB7XG4gICAgICAgIHZhciBmb2xkO1xuXG4gICAgICAgIGlmIChzZXR0aW5ncy5jb250YWluZXIgPT09IHVuZGVmaW5lZCB8fCBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykge1xuICAgICAgICAgICAgZm9sZCA9ICR3aW5kb3cud2lkdGgoKSArICR3aW5kb3cuc2Nyb2xsTGVmdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9sZCA9ICQoc2V0dGluZ3MuY29udGFpbmVyKS5vZmZzZXQoKS5sZWZ0ICsgJChzZXR0aW5ncy5jb250YWluZXIpLndpZHRoKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZm9sZCA8PSAkKGVsZW1lbnQpLm9mZnNldCgpLmxlZnQgLSBzZXR0aW5ncy50aHJlc2hvbGQ7XG4gICAgfTtcblxuICAgICQuYWJvdmV0aGV0b3AgPSBmdW5jdGlvbihlbGVtZW50LCBzZXR0aW5ncykge1xuICAgICAgICB2YXIgZm9sZDtcblxuICAgICAgICBpZiAoc2V0dGluZ3MuY29udGFpbmVyID09PSB1bmRlZmluZWQgfHwgc2V0dGluZ3MuY29udGFpbmVyID09PSB3aW5kb3cpIHtcbiAgICAgICAgICAgIGZvbGQgPSAkd2luZG93LnNjcm9sbFRvcCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9sZCA9ICQoc2V0dGluZ3MuY29udGFpbmVyKS5vZmZzZXQoKS50b3A7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZm9sZCA+PSAkKGVsZW1lbnQpLm9mZnNldCgpLnRvcCArIHNldHRpbmdzLnRocmVzaG9sZCArICQoZWxlbWVudCkuaGVpZ2h0KCk7XG4gICAgfTtcblxuICAgICQubGVmdG9mYmVnaW4gPSBmdW5jdGlvbihlbGVtZW50LCBzZXR0aW5ncykge1xuICAgICAgICB2YXIgZm9sZDtcblxuICAgICAgICBpZiAoc2V0dGluZ3MuY29udGFpbmVyID09PSB1bmRlZmluZWQgfHwgc2V0dGluZ3MuY29udGFpbmVyID09PSB3aW5kb3cpIHtcbiAgICAgICAgICAgIGZvbGQgPSAkd2luZG93LnNjcm9sbExlZnQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvbGQgPSAkKHNldHRpbmdzLmNvbnRhaW5lcikub2Zmc2V0KCkubGVmdDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmb2xkID49ICQoZWxlbWVudCkub2Zmc2V0KCkubGVmdCArIHNldHRpbmdzLnRocmVzaG9sZCArICQoZWxlbWVudCkud2lkdGgoKTtcbiAgICB9O1xuXG4gICAgJC5pbnZpZXdwb3J0ID0gZnVuY3Rpb24oZWxlbWVudCwgc2V0dGluZ3MpIHtcblxuICAgICAgICByZXR1cm4gISQucmlnaHRvZmZvbGQoZWxlbWVudCwgc2V0dGluZ3MpICYmICEkLmxlZnRvZmJlZ2luKGVsZW1lbnQsIHNldHRpbmdzKSAmJlxuICAgICAgICAgICAgISQuYmVsb3d0aGVmb2xkKGVsZW1lbnQsIHNldHRpbmdzKSAmJiAhJC5hYm92ZXRoZXRvcChlbGVtZW50LCBzZXR0aW5ncyk7XG4gICAgfTtcblxuICAgIC8qIEN1c3RvbSBzZWxlY3RvcnMgZm9yIHlvdXIgY29udmVuaWVuY2UuICAgKi9cbiAgICAvKiBVc2UgYXMgJChcImltZzpiZWxvdy10aGUtZm9sZFwiKS5zb21ldGhpbmcoKSBvciAqL1xuICAgIC8qICQoXCJpbWdcIikuZmlsdGVyKFwiOmJlbG93LXRoZS1mb2xkXCIpLnNvbWV0aGluZygpIHdoaWNoIGlzIGZhc3RlciAqL1xuXG4gICAgJC5leHRlbmQoJC5leHByW1wiOlwiXSwge1xuICAgICAgICBcImJlbG93LXRoZS1mb2xkXCI6IGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkLmJlbG93dGhlZm9sZChhLCB7XG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgXCJhYm92ZS10aGUtdG9wXCI6IGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHJldHVybiAhJC5iZWxvd3RoZWZvbGQoYSwge1xuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIFwicmlnaHQtb2Ytc2NyZWVuXCI6IGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkLnJpZ2h0b2Zmb2xkKGEsIHtcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBcImxlZnQtb2Ytc2NyZWVuXCI6IGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHJldHVybiAhJC5yaWdodG9mZm9sZChhLCB7XG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgXCJpbi12aWV3cG9ydFwiOiBmdW5jdGlvbihhKSB7XG4gICAgICAgICAgICByZXR1cm4gJC5pbnZpZXdwb3J0KGEsIHtcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKiBNYWludGFpbiBCQyBmb3IgY291cGxlIG9mIHZlcnNpb25zLiAqL1xuICAgICAgICBcImFib3ZlLXRoZS1mb2xkXCI6IGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHJldHVybiAhJC5iZWxvd3RoZWZvbGQoYSwge1xuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIFwicmlnaHQtb2YtZm9sZFwiOiBmdW5jdGlvbihhKSB7XG4gICAgICAgICAgICByZXR1cm4gJC5yaWdodG9mZm9sZChhLCB7XG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgXCJsZWZ0LW9mLWZvbGRcIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICEkLnJpZ2h0b2Zmb2xkKGEsIHtcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBHZW5lcmFsLmluaXQoKTtcbiAgICBJbWFnZVNtYXJ0TG9hZGVyLmluaXQoKTtcbiAgICBpZiAoJCgnYm9keScpLmhhc0NsYXNzKCdwb3N0LXRlbXBsYXRlJykpIHtcbiAgICAgICAgR2VuZXJhbC5hZGRJY29ucygpO1xuICAgICAgICBHZW5lcmFsLmNvbW1lbnRMb2FkZXIoKTtcbiAgICB9XG5cbn0pXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
